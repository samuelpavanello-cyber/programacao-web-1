<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <title>Tabela de Notas</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <h1>Notas dos Alunos</h1>
    <table id="tabelaNotas">
        <thead>
            <tr>
                <th>Aluno</th>
                <th colspan="3">Semestre 1</th>
                <th colspan="3">Semestre 2</th>
                <th colspan="3">Semestre 3</th>
            </tr>
            <tr>
                <th></th>
                <th>Nota 1</th>
                <th>Nota 2</th>
                <th>Nota 3</th>
                <th>Nota 1</th>
                <th>Nota 2</th>
                <th>Nota 3</th>
                <th>Nota 1</th>
                <th>Nota 2</th>
                <th>Nota 3</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>João</td>
                <td>10</td>
                <td>8</td>
                <td>9</td>
                <td>6</td>
                <td>8.7</td>
                <td>10</td>
                <td>6</td>
                <td>7</td>
                <td>9</td>
            </tr>
            <tr>
                <td>Maria</td>
                <td>9</td>
                <td>7</td>
                <td>8</td>
                <td>7</td>
                <td>6.5</td>
                <td>9</td>
                <td>8</td>
                <td>7.5</td>
                <td>8</td>
            </tr>
            <tr>
                <td>Jose</td>
                <td>8</td>
                <td>6</td>
                <td>7</td>
                <td>5</td>
                <td>7.2</td>
                <td>8</td>
                <td>6</td>
                <td>6.5</td>
                <td>7</td>
            </tr>
            <tr>
                <td>Paulo</td>
                <td>7</td>
                <td>9</td>
                <td>6</td>
                <td>8</td>
                <td>7.8</td>
                <td>7</td>
                <td>9</td>
                <td>8.5</td>
                <td>6</td>
            </tr>
            <tr>
                <td>Miguel</td>
                <td>6</td>
                <td>8</td>
                <td>7</td>
                <td>9</td>
                <td>6.9</td>
                <td>8</td>
                <td>7</td>
                <td>9.5</td>
                <td>7</td>
            </tr>
            <tr>
                <td>Julia</td>
                <td>10</td>
                <td>7</td>
                <td>8</td>
                <td>6</td>
                <td>8.3</td>
                <td>9</td>
                <td>8</td>
                <td>6.5</td>
                <td>10</td>
            </tr>
        </tbody>
    </table>
    <button onclick="adicionarMediaLinha()">Adicionar Média por Linha</button>
    <button onclick="adicionarMediaColuna()">Adicionar Média por Coluna</button>

    <script>
        let linhaAdicionada = false;
        let colunaAdicionada = false;

        function adicionarMediaLinha() {
            if (linhaAdicionada) return; 
            let tabela = document.getElementById('tabelaNotas');
            let corpoTabela = tabela.getElementsByTagName('tbody')[0];
            let linhas = corpoTabela.getElementsByTagName('tr');
            let novaLinha = document.createElement('tr');
            let celulaTotal = document.createElement('td');
            celulaTotal.textContent = 'Média';
            celulaTotal.className = 'media';
            novaLinha.appendChild(celulaTotal);

            for (let i = 1; i < linhas[0].cells.length; i++) {
                let soma = 0;
                let contador = 0;
                for (let j = 0; j < linhas.length; j++) {
                    let valor = parseFloat(linhas[j].cells[i].textContent) || 0;
                    if (!isNaN(valor)) {
                        soma += valor;
                        contador++;
                    }
                }
                let celulaMedia = document.createElement('td');
                celulaMedia.textContent = contador > 0 ? (soma / contador).toFixed(2) : 'N/A';
                celulaMedia.className = 'media';
                novaLinha.appendChild(celulaMedia);
            }
            corpoTabela.appendChild(novaLinha);
            linhaAdicionada = true;
        }

        function adicionarMediaColuna() {
            if (colunaAdicionada) return;
            let tabela = document.getElementById('tabelaNotas');
            let cabecalho = tabela.getElementsByTagName('thead')[0];
            let corpoTabela = tabela.getElementsByTagName('tbody')[0];
            let linhas = corpoTabela.getElementsByTagName('tr');

     
            let linhaCabecalho = cabecalho.getElementsByTagName('tr')[1];
            let novoTh = document.createElement('th');
            novoTh.textContent = 'Média';
            novoTh.className = 'media';
            linhaCabecalho.appendChild(novoTh);

            for (let i = 0; i < linhas.length; i++) {
                let soma = 0;
                let contador = 0;
                let celulas = linhas[i].getElementsByTagName('td');
                for (let j = 1; j < celulas.length; j++) {
                    let valor = parseFloat(celulas[j].textContent) || 0;
                    if (!isNaN(valor)) {
                        soma += valor;
                        contador++;
                    }
                }
                
                let celulaMedia = document.createElement('td');
                celulaMedia.textContent = contador > 0 ? (soma / contador).toFixed(2) : 'N/A';
                celulaMedia.className = 'media';
                linhas[i].appendChild(celulaMedia);
            }
            colunaAdicionada = true;
        }
    </script>
</body>
</html>